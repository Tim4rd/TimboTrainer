<!DOCTYPE html>
<html>
<head>
    <title>Cycling Power Meter</title>
    <meta http-equiv="Content-Security-Policy" 
        content="default-src 'self'; 
                 script-src 'self' 'unsafe-inline' 'unsafe-eval'; 
                 style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; 
                 font-src 'self' https://cdnjs.cloudflare.com; 
                 img-src 'self' data:;">
    
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Connection buttons at top -->
        <div class="connection-controls">
            <span class="logo">TimboTrainer</span>
            <button id="connectBtn">Connect Power Meter</button>
            <button id="connectHRButton">Connect Heart Rate</button>
            <button id="connectCSCButton">Connect Speed/Cadence</button>
        </div>

        <!-- <div id="status"></div> -->
        
        <div class="main-display">
            <!-- Left metrics -->
            <div class="grey-box">
                <div class="metrics">
                    <div>
                        <span class="metric-label">
                            <i class="fas fa-bolt connection-indicator"></i>
                            Current Power:
                        </span>
                        <span class="metric-value" id="currentPower">-- W</span>
                    </div>
                    <div>
                        <span class="metric-label">Average Power:</span>
                        <span class="average-value" id="avgPower">-- W</span>
                    </div>
                    
                    <div>
                        <span class="metric-label">
                            <i class="fas fa-heart connection-indicator"></i>
                            Heart Rate:
                        </span>
                        <span class="metric-value" id="heartRate">-- BPM</span>
                    </div>
                    <div>
                        <span class="metric-label">Average HR:</span>
                        <span class="average-value" id="avgHeartRate">-- BPM</span>
                    </div>
                    <div>
                        <span class="metric-label">
                            <i class="fas fa-road connection-indicator"></i>
                            Distance:
                        </span>
                        <span class="metric-value" id="distance">0.00 km</span>
                    </div>
                    <div>
                        <span class="metric-label">Speed:</span>
                        <span class="metric-value" id="speed">0.0 km/h</span>
                    </div>
                    
                    <div>
                        <span class="metric-label">
                            <i class="fas fa-bicycle connection-indicator"></i>
                            Cadence:
                        </span>
                        <span class="metric-value" id="cadence">-- RPM</span>
                    </div>
                    <div>
                        <span class="metric-label">Average Cadence:</span>
                        <span class="average-value" id="avgCadence">-- RPM</span>
                    </div>
                </div>
            </div>

            <!-- Graph section -->
            <div class="graph-section">
                <canvas id="powerGraph"></canvas>
            </div>

            <!-- Averages box -->
            <div class="grey-box">
                <div id="averages">
                    <div class="average-box">3s: <span id="avg3s">-- W</span></div>
                    <div class="average-box">5s: <span id="avg5s">-- W</span></div>
                    <div class="average-box">1min: <span id="avg1min">-- W</span></div>
                    <div class="average-box">5min: <span id="avg5min">-- W</span></div>
                </div>
            </div>
        </div>

        <!-- Recording controls at bottom -->
        <div class="recording-controls">
            <button id="startRecordingBtn">Start Recording</button>
            <button id="stopRecordingBtn" disabled>Stop & Save</button>
        </div>
    </div>
<script src="js/bluetooth.js"></script>
<script src="js/powerGraph.js"></script>
<script src="js/workout-recorder.js"></script>
<script src="js/main.js"></script>
<script src="js/tcx-generator.js"></script>
</body>
</html>

